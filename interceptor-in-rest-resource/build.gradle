apply plugin: 'java'
apply plugin: 'war'

group='com.tao'
version='1.0-SNAPSHOT'


repositories {
    mavenCentral()
}

dependencies {
    providedCompile 'javax:javaee-api:7.0'
    testCompile 'junit:junit:4.11'
    testCompile 'org.jboss.arquillian:arquillian-bom:1.1.4.Final'
    testCompile 'org.jboss.arquillian.junit:arquillian-junit-container:1.1.4.Final'
    testRuntime 'org.glassfish.main.extras:glassfish-embedded-all:4.0'
    testRuntime 'org.jboss.arquillian.container:arquillian-glassfish-embedded-3.1:1.0.0.CR4'
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.11'
}

tasks.withType( Test ) {
    testLogging.showStandardStreams = true
    testLogging.events 'passed', 'skipped', 'failed'

    outputs.upToDateWhen { false }
    maxParallelForks = project.hasProperty( 'fork' ) ? project.fork.toInteger() : 1
}

tasks.addRule("Pattern: test.<TestClassName>: Run single test.") { String taskName ->
    if (taskName.startsWith("test.")) {
        String pattern = taskName - 'test.'
        task(taskName, type: Test ) {
            include "**/*${pattern}*"
        }
    }
}

